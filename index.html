<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Timetable Slot Manager</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
    
    :root {
      --primary: #0af;
      --secondary: #0ff;
      --success: #0f8;
      --error: #f08;
      --bg-dark: #0a0a12;
      --bg-light: rgba(0, 20, 40, 0.8);
      --highlight: rgba(0, 255, 170, 0.3);
    }
    
    body {
      font-family: 'Share Tech Mono', monospace;
      margin: 0;
      padding: 15px;
      background-color: var(--bg-dark);
      color: var(--primary);
      line-height: 1.5;
      font-size: 15px;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(0, 170, 255, 0.05) 0%, transparent 25%),
        radial-gradient(circle at 80% 70%, rgba(0, 255, 170, 0.05) 0%, transparent 25%);
    }
    
    h1, h2 {
      text-align: center;
      color: var(--secondary);
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
      margin: 20px 0 15px;
      letter-spacing: 1px;
    }
    
    h1 {
      font-size: 2em;
      position: relative;
      padding-bottom: 10px;
      animation: pulse 4s infinite alternate;
    }
    
    @keyframes pulse {
      0% { text-shadow: 0 0 10px rgba(0, 255, 255, 0.7); }
      100% { text-shadow: 0 0 15px rgba(0, 255, 255, 0.9), 0 0 25px rgba(0, 255, 255, 0.5); }
    }
    
    h1::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 25%;
      width: 50%;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--secondary), transparent);
      animation: scanline 3s linear infinite;
    }
    
    h2 {
      font-size: 1.5em;
      margin-top: 25px;
    }
    
    .control-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
      align-items: end;
      background: rgba(0, 10, 20, 0.7);
      padding: 20px;
      border-radius: 5px;
      border: 1px solid var(--primary);
      box-shadow: 0 0 20px rgba(0, 170, 255, 0.2);
      position: relative;
      overflow: hidden;
    }
    
    .control-panel::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--secondary), transparent);
      animation: scanline 6s linear infinite;
    }
    
    @keyframes scanline {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(calc(100vh + 100%)); }
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
      position: relative;
    }
    
    .input-group label {
      font-size: 0.8em;
      color: var(--secondary);
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: 0.8px;
    }
    
    input, select {
      padding: 9px 12px;
      font-size: 1em;
      border: 1px solid var(--primary);
      background: var(--bg-light);
      color: var(--secondary);
      font-family: inherit;
      width: 100%;
      box-sizing: border-box;
      border-radius: 4px;
      transition: all 0.3s;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 12px rgba(0, 255, 255, 0.4);
      transform: translateY(-1px);
    }
    
    input::placeholder {
      color: var(--primary);
      opacity: 0.6;
    }
    
    button {
      padding: 9px 15px;
      font-size: 0.95em;
      border: 1px solid var(--primary);
      background: linear-gradient(to bottom, rgba(0, 100, 200, 0.5), rgba(0, 50, 100, 0.5));
      color: var(--secondary);
      font-family: inherit;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    button:hover {
      background: linear-gradient(to bottom, rgba(0, 150, 255, 0.6), rgba(0, 100, 200, 0.6));
      text-shadow: 0 0 8px var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 170, 255, 0.3);
    }
    
    button::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.1),
        transparent
      );
      transition: 0.5s;
      z-index: -1;
    }
    
    button:hover::before {
      left: 100%;
    }
    
    .status {
      text-align: center;
      margin: 12px 0 8px;
      padding: 10px;
      font-size: 0.95em;
      grid-column: 1 / -1;
      border-radius: 4px;
      letter-spacing: 1px;
      animation: fadeIn 0.5s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .status.success {
      color: var(--success);
      background: rgba(0, 255, 0, 0.15);
      border: 1px solid var(--success);
    }
    
    .status.error {
      color: var(--error);
      background: rgba(255, 0, 0, 0.15);
      border: 1px solid var(--error);
    }
    
    table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 25px;
      font-size: 0.95em;
      box-shadow: 0 0 25px rgba(0, 170, 255, 0.15);
      position: relative;
      overflow: hidden;
    }
    
    table::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--secondary), transparent);
      animation: scanline 8s linear infinite;
      z-index: 1;
    }
    
    th, td {
      border: 1px solid var(--primary);
      padding: 10px 8px;
      text-align: center;
      position: relative;
    }
    
    th {
      background-color: rgba(0, 170, 255, 0.2);
      color: var(--secondary);
      font-weight: normal;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 0.9em;
    }
    
    .highlight {
      background-color: var(--highlight);
      border: 1px solid var(--success);
      color: #fff;
      font-weight: bold;
      position: relative;
      animation: highlightPulse 2s infinite alternate;
    }
    
    @keyframes highlightPulse {
      0% { box-shadow: inset 0 0 10px rgba(0, 255, 170, 0.3); }
      100% { box-shadow: inset 0 0 20px rgba(0, 255, 170, 0.5); }
    }
    
    .highlight::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        135deg,
        transparent 45%,
        rgba(0, 255, 255, 0.15) 50%,
        transparent 55%
      );
      animation: glimmer 3s infinite linear;
      pointer-events: none;
    }
    
    @keyframes glimmer {
      0% { background-position: -100% 0; }
      100% { background-position: 200% 0; }
    }
    
    /* Compact time slots on small screens */
    @media (max-width: 768px) {
      body {
        padding: 10px;
        font-size: 14px;
      }
      
      h1 {
        font-size: 1.6em;
      }
      
      h2 {
        font-size: 1.3em;
      }
      
      .control-panel {
        grid-template-columns: 1fr 1fr;
        padding: 15px;
      }
      
      #timetable th:nth-child(n+6),
      #timetable td:nth-child(n+6) {
        display: none;
      }
      
      #detailsTable th:nth-child(3),
      #detailsTable td:nth-child(3) {
        display: none;
      }
      
      button {
        padding: 8px 12px;
      }
    }
    
    /* Action buttons container */
    .actions {
      display: flex;
      gap: 10px;
    }
    
    /* Specific element sizing */
    #slotCode { max-width: 100px; }
    #className { max-width: 200px; }
    #faculty { max-width: 160px; }
    #location { max-width: 80px; }
    #removeSelect { min-width: 160px; }
    
    /* Table row hover effect */
    tr:hover td:not(:first-child) {
      background: rgba(0, 170, 255, 0.1);
      transition: background 0.3s;
    }
    
    /* Day column styling */
    td:first-child {
      font-weight: bold;
      color: var(--secondary);
      background: rgba(0, 170, 255, 0.15);
    }
    
    /* Lunch cell styling */
    td:nth-child(5) {
      font-style: italic;
      color: rgba(0, 255, 255, 0.8);
      background: rgba(0, 100, 150, 0.1);
    }
    
    /* Flicker animation for empty slots */
    td[data-slot]:not(.highlight) {
      animation: flicker 8s infinite;
    }
    
    @keyframes flicker {
      0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
        opacity: 1;
      }
      20%, 22%, 24%, 55% {
        opacity: 0.7;
      }
    }
  </style>
</head>
<body>
  <h1>Timetable Slot Manager</h1>

  <div class="control-panel">
    <div class="input-group">
      <label for="slotCode">SLOT</label>
      <input type="text" id="slotCode" placeholder="A11+A12" maxlength="15" />
    </div>
    
    <div class="input-group">
      <label for="className">CLASS</label>
      <input type="text" id="className" placeholder="Class Name" maxlength="30" />
    </div>
    
    <div class="input-group">
      <label for="faculty">FACULTY</label>
      <input type="text" id="faculty" placeholder="Faculty" maxlength="20" />
    </div>
    
    <div class="input-group">
      <label for="location">LOCATION</label>
      <input type="text" id="location" placeholder="Location" maxlength="8" />
    </div>
    
    <div class="actions">
      <button id="addBtn">ADD SLOT</button>
      <button id="resetBtn">RESET ALL</button>
    </div>
    
    <div class="input-group">
      <label for="removeSelect">REMOVE SLOT</label>
      <select id="removeSelect">
        <option value="">Select slot...</option>
      </select>
    </div>
    
    <button id="removeBtn">REMOVE</button>
    
    <div class="status" id="status"></div>
  </div>

  <h2>Timetable</h2>
  <table id="timetable">
    <thead>
      <tr>
        <th>Day</th>
        <th>08:30-10:00</th>
        <th>10:05-11:35</th>
        <th>11:40-13:10</th>
        <th>Lunch</th>
        <th>13:15-14:45</th>
        <th>14:50-16:20</th>
        <th>16:25-17:55</th>
        <th>18:00-19:30</th>
      </tr>
    </thead>
    <tbody>
      <tr data-day="MON"><td>MON</td><td data-slot="A11">A11</td><td data-slot="B11">B11</td><td data-slot="C11">C11</td><td>Lunch</td><td data-slot="A21">A21</td><td data-slot="A14">A14</td><td data-slot="B21">B21</td><td data-slot="C21">C21</td></tr>
      <tr data-day="TUE"><td>TUE</td><td data-slot="D11">D11</td><td data-slot="E11">E11</td><td data-slot="F11">F11</td><td>Lunch</td><td data-slot="D21">D21</td><td data-slot="E14">E14</td><td data-slot="E21">E21</td><td data-slot="F21">F21</td></tr>
      <tr data-day="WED"><td>WED</td><td data-slot="A12">A12</td><td data-slot="B12">B12</td><td data-slot="C12">C12</td><td>Lunch</td><td data-slot="A22">A22</td><td data-slot="B14">B14</td><td data-slot="B22">B22</td><td data-slot="A24">A24</td></tr>
      <tr data-day="THU"><td>THU</td><td data-slot="D12">D12</td><td data-slot="E12">E12</td><td data-slot="F12">F12</td><td>Lunch</td><td data-slot="D22">D22</td><td data-slot="F14">F14</td><td data-slot="E22">E22</td><td data-slot="F22">F22</td></tr>
      <tr data-day="FRI"><td>FRI</td><td data-slot="A13">A13</td><td data-slot="B13">B13</td><td data-slot="C13">C13</td><td>Lunch</td><td data-slot="A23">A23</td><td data-slot="C14">C14</td><td data-slot="B23">B23</td><td data-slot="B24">B24</td></tr>
      <tr data-day="SAT"><td>SAT</td><td data-slot="D13">D13</td><td data-slot="E13">E13</td><td data-slot="F13">F13</td><td>Lunch</td><td data-slot="D23">D23</td><td data-slot="D14">D14</td><td data-slot="D24">D24</td><td data-slot="E23">E23</td></tr>
    </tbody>
  </table>

  <h2>Booked Slot Details</h2>
  <table id="detailsTable">
    <thead>
      <tr>
        <th>Slot(s)</th>
        <th>Day(s)</th>
        <th>Time(s)</th>
        <th>Class</th>
        <th>Faculty</th>
        <th>Location</th>
      </tr>
    </thead>
    <tbody id="detailsBody">
      <tr><td colspan="6">No slots booked yet.</td></tr>
    </tbody>
  </table>

  <script>
    const slotDetails = {};
    const addBtn = document.getElementById("addBtn");
    const removeBtn = document.getElementById("removeBtn");
    const resetBtn = document.getElementById("resetBtn");
    const status = document.getElementById("status");
    const slotInput = document.getElementById("slotCode");
    const removeSelect = document.getElementById("removeSelect");
    const classNameInput = document.getElementById("className");
    const facultyInput = document.getElementById("faculty");
    const locationInput = document.getElementById("location");
    const detailsBody = document.getElementById("detailsBody");

    function showStatus(msg, type) {
      status.textContent = msg;
      status.className = `status ${type}`;
      setTimeout(() => (status.textContent = ""), 4000);
    }

    function getSlotInfo(code) {
      const cell = document.querySelector(`[data-slot="${code}"]`);
      if (!cell) return null;
      const day = cell.closest("tr").dataset.day;
      const time = document.querySelector(`#timetable thead tr th:nth-child(${cell.cellIndex + 1})`).textContent;
      return { cell, day, time };
    }

    function hasLunchConflict(newCodes) {
      const lunch1 = "11:40-13:10";
      const lunch2 = "13:15-14:45";
      const dayTimeMap = {};

      for (const entry of Object.values(slotDetails).flat()) {
        if (!dayTimeMap[entry.day]) dayTimeMap[entry.day] = new Set();
        dayTimeMap[entry.day].add(entry.time);
      }

      for (let code of newCodes) {
        const info = getSlotInfo(code);
        if (!info) continue;
        if (!dayTimeMap[info.day]) dayTimeMap[info.day] = new Set();
        dayTimeMap[info.day].add(info.time);
      }

      for (const times of Object.values(dayTimeMap)) {
        if (times.has(lunch1) && times.has(lunch2)) {
          return true;
        }
      }

      return false;
    }

    function updateDetailsTable() {
      detailsBody.innerHTML = "";
      if (Object.keys(slotDetails).length === 0) {
        detailsBody.innerHTML = `<tr><td colspan="6">No slots booked yet.</td></tr>`;
        return;
      }
      for (const [key, val] of Object.entries(slotDetails)) {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${key}</td>
          <td>${val.map(v => v.day).join(", ")}</td>
          <td>${val.map(v => v.time).join(", ")}</td>
          <td>${val[0].className}</td>
          <td>${val[0].faculty}</td>
          <td>${val[0].location}</td>
        `;
        detailsBody.appendChild(tr);
      }
    }

    function updateDropdown() {
      removeSelect.innerHTML = `<option value="">Select slot to remove</option>`;
      Object.keys(slotDetails).forEach(code => {
        const opt = document.createElement("option");
        opt.value = code;
        opt.textContent = code;
        removeSelect.appendChild(opt);
      });
    }

    addBtn.addEventListener("click", () => {
      const input = slotInput.value.trim().toUpperCase();
      if (!input) return showStatus("Enter slot code(s)", "error");
      const codes = input.split("+").map(s => s.trim());
      const allValid = codes.every(code => /^[A-Z]\d{2}$/.test(code));
      if (!allValid) return showStatus("Invalid slot code(s)", "error");

      const className = classNameInput.value.trim();
      const faculty = facultyInput.value.trim();
      const location = locationInput.value.trim();

      if (hasLunchConflict(codes)) {
        return showStatus("❌ Cannot book both 11:40-13:10 and 13:15-14:45 on same day.", "error");
      }

      const details = [];
      for (let code of codes) {
        if (Object.values(slotDetails).some(arr => arr.find(s => s.code === code))) {
          return showStatus(`❌ Slot ${code} already booked`, "error");
        }
        const info = getSlotInfo(code);
        if (!info) return showStatus(`❌ Slot ${code} not found`, "error");
        info.code = code;
        info.className = className;
        info.faculty = faculty;
        info.location = location;
        details.push(info);
        info.cell.classList.add("highlight");
      }

      slotDetails[input] = details;
      updateDetailsTable();
      updateDropdown();
      showStatus("✅ Slot(s) added successfully", "success");
      slotInput.value = classNameInput.value = facultyInput.value = locationInput.value = "";
    });

    removeBtn.addEventListener("click", () => {
      const selected = removeSelect.value;
      if (!selected) return;
      slotDetails[selected].forEach(s => s.cell.classList.remove("highlight"));
      delete slotDetails[selected];
      updateDetailsTable();
      updateDropdown();
      showStatus("🗑️ Slot removed successfully", "success");
    });

    resetBtn.addEventListener("click", () => {
      Object.values(slotDetails).flat().forEach(s => s.cell.classList.remove("highlight"));
      Object.keys(slotDetails).forEach(k => delete slotDetails[k]);
      updateDetailsTable();
      updateDropdown();
      showStatus("♻️ All slots cleared successfully", "success");
    });
  </script>
</body>
</html>
